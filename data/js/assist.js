(function(){var advertiser_id,assign_globals,assist_api_url,awin,awin_new_user,build_post_request,cookie_callback_redirectingat,cookie_callback_skimresources,data_layer,data_layer_new_user,encode_uri,g_detect,get_script,get_skim_cookie,json_stringify,local_stringify,locationUrl,make_post_request,redirect_api_url,referrer,remove_data_layer_sensitive,remove_pii,skimlinks_api_url,track_assist,universal_variable,__callbacks,__cookie,__init,_window,__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(a){for(var b=
0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1};g_detect=function(){return function(){var a;a=navigator.userAgent.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:parseFloat(a[2])||0}}}(this)();
local_stringify=function(a){var b,d,c,e,f;if("object"===typeof a||a instanceof Array){e="";c=0;d=a instanceof Array;for(f in a)__hasProp.call(a,f)&&(b=a[f],0<c&&(e+=","),d?e+=json_stringify(b):(b=json_stringify(b),e+='"'+f+'":'+b),c++);return d?"["+e+"]":"{"+e+"}"}if("string"===typeof a)return b=a.replace(/"/g,'\\"',a),'"'+b+'"';if(isNaN(a))return"null"};
json_stringify=function(){return function(){var a;return"undefined"!==typeof JSON&&null!==JSON&&JSON.stringify&&'["la"]'===JSON.stringify(["la"])?(a=JSON.stringify,function(b){return a(b)}):local_stringify}}(this)();
get_script=function(a,b,d){var i;var c,e,f,g,h;null==d&&(d={});c=d.charset||null;h=d.target||null;i=null!=(e=d.async)?e:!0,d=i;e=null!=h&&h.document?h.document:document;f=e.getElementsByTagName("head")[0];g=e.createElement("script");g.type="text/javascript";if(c)g.charset=c;if(b)g.onload=g.onreadystatechange=function(a){return function(){var d;d=!1;return function(){var c;c=a.readyState;if(!d&&(!c||"complete"===c||"loaded"===c))return g.onload=g.onreadystatechange=null,d=!0,b.call(h),!0}}}(this)();
g.async=!1!==d;g.src=a;f.appendChild(g);return g};encode_uri=function(){return function(){var a,b;b=[function(){var b,c,e,f;e=[["%20","+"],["!","%21"],["'","%27"],["\\(","%28"],["\\)","%29"],["\\*","%2A"],["\\~","%7E"]];f=[];for(b=0,c=e.length;b<c;b++)a=e[b],f.push([RegExp(a[0],"g"),a[1]]);return f}()];return function(d){var c,e,d=encodeURIComponent(d);for(c=0,e=b.length;c<e;c++)a=b[c],d=d.replace(a[0],a[1]);return d}}}(this)();
build_post_request=function(a){var b,d;b=[];"undefined"!==typeof sl_xrf&&null!==sl_xrf&&(a.xrf=1);for(d in a)a.hasOwnProperty(d)&&b.push(""+d+"="+encode_uri(a[d]));return b.join("&")};
make_post_request=function(a,b,d){var c,e,f;if("msie"!==g_detect.browser)e=!1,f=new XMLHttpRequest,f.open("POST",a,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),0<=__indexOf.call(f,"withCredentials")&&(f.withCredentials=!0),f.async="true",f.onreadystatechange=function(){var a;if(e)return!0;if(4===f.readyState){e=!0;if(200===f.status){a={};try{a=JSON.parse(f.responseText)}catch(b){try{a=eval("("+f.responseText+")")}catch(c){a={}}}d(a);return!0}return!1}},f.send(b);else if(_window.XDomainRequest){if(c=
new XDomainRequest,0<=__indexOf.call(c,"withCredentials")&&(c.withCredentials=!0),c){c.open("POST",a,!0);c.onload=function(){var a;a={};if("undefined"!==typeof JSON&&null!==JSON&&JSON.parse)try{a=JSON.parse(c.responseText)}catch(b){a={}}else try{a=eval("("+c.responseText+")")}catch(e){a={}}d(a);return!0};c.onerror=function(){return!1};c.onprogress=function(){return!1};c.ontimeout=function(){return!1};c.async=!0;try{c.send(b)}catch(g){return!1}}}else return!1;return!0};_window=window;
advertiser_id=universal_variable=awin=data_layer=void 0;__cookie={skimresources:null,redirectingat:null};__callbacks={skimresources:!1,redirectingat:!1};locationUrl=window.location.href||window.location||"";referrer=window.document.referrer||"";assist_api_url="//t.skimresources.com/api/assist";skimlinks_api_url="//r.skimresources.com/api/";redirect_api_url="//r.redirectingat.com/api/";
assign_globals=function(){advertiser_id=_window.skim_advertiser_id||null;universal_variable=_window.universal_variable||null;universal_variable=remove_pii(universal_variable);data_layer=data_layer_new_user(_window.dataLayer||null);data_layer=remove_data_layer_sensitive(data_layer);return awin=awin_new_user(_window.AWIN||null)};awin_new_user=function(a){var b;return a?(b={new_user:-1},a.Tracking&&(b.Sale=a.Tracking.Sale?a.Tracking.Sale:null),b):null};
data_layer_new_user=function(a){return a?{events:a,new_user:-1}:null};remove_data_layer_sensitive=function(a){var b,d,c,e,f;if(!a)return a;if(a.events){f=a.events;for(d=c=0,e=f.length;c<e;d=++c)b=f[d],b.visitor&&(delete b.visitor,a.events[d]=b)}return a};
remove_pii=function(a){var b;if(a&&"undefined"!==typeof JSON&&JSON.stringify&&JSON.parse)a=JSON.parse(JSON.stringify(a)),a.new_user=null!=(null!=(b=a.user)?b.returning:void 0)?a.user.returning?0:1:-1,delete a.user,delete a.address,a.transaction&&(delete a.transaction.delivery,delete a.transaction.billing,delete a.transaction.shipping);return a};cookie_callback_redirectingat=function(a){__cookie.redirectingat=a.guid||null;__callbacks.redirectingat=!0;if(advertiser_id&&__callbacks.skimresources)return track_assist()};
cookie_callback_skimresources=function(a){__cookie.skimresources=a.guid||null;__callbacks.skimresources=!0;if(advertiser_id&&__callbacks.redirectingat)return track_assist()};get_skim_cookie=function(a,b){return get_script(a+"?callback="+b)};
track_assist=function(){var a;a={};a={data:json_stringify({uni:json_stringify(universal_variable),gdl:json_stringify(data_layer),awin:json_stringify(awin),url:locationUrl,ref:referrer,guid1:__cookie.skimresources,guid2:__cookie.redirectingat,advertiser_id:advertiser_id,typ:"a"})};a=build_post_request(a);return make_post_request(assist_api_url,a,function(){})};
__init=function(){assign_globals();get_skim_cookie(skimlinks_api_url,"skimCookieCallbackSkimresources");return get_skim_cookie(redirect_api_url,"skimCookieCallbackRedirectingat")};__init();_window.skimCookieCallbackSkimresources=cookie_callback_skimresources;_window.skimCookieCallbackRedirectingat=cookie_callback_redirectingat;})();
